### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç group / join / aggregate –æ–ø–µ—Ä–∞—Ü–∏–∏

–≠—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî —á–∞—Å—Ç—å LINQ –∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏ —Å–≤—ë—Ä—Ç–∫—É –¥–∞–Ω–Ω—ã—Ö, –ø–æ–¥–æ–±–Ω–æ SQL-–∑–∞–ø—Ä–æ—Å–∞–º.

---

#### üß© **1. Group (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞)**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—ä–µ–¥–∏–Ω—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ –∫–ª—é—á—É.  
–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —è–≤–ª—è–µ—Ç—Å—è –∫–æ–ª–ª–µ–∫—Ü–∏—è –≥—Ä—É–ø–ø (`IGrouping<TKey, TElement>`), –≥–¥–µ –∫–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á –∏ —ç–ª–µ–º–µ–Ω—Ç—ã.

```csharp
var users = new[]
{
    new { Name = "–ê–Ω—è", City = "–ê–ª–º–∞—Ç—ã" },
    new { Name = "–ë–æ—Ä–∏—Å", City = "–ê—Å—Ç–∞–Ω–∞" },
    new { Name = "–í–∏–∫–∞", City = "–ê–ª–º–∞—Ç—ã" }
};

var grouped = users.GroupBy(u => u.City);

foreach (var group in grouped)
{
    Console.WriteLine($"–ì–æ—Ä–æ–¥: {group.Key}");
    foreach (var user in group)
        Console.WriteLine($"  {user.Name}");
}
/*
–ì–æ—Ä–æ–¥: –ê–ª–º–∞—Ç—ã
  –ê–Ω—è
  –í–∏–∫–∞
–ì–æ—Ä–æ–¥: –ê—Å—Ç–∞–Ω–∞
  –ë–æ—Ä–∏—Å
*/
```
üëâ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–∏–∑–Ω–∞–∫—É.

---
#### üîó **2. Join (–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ)**
–°–≤—è–∑—ã–≤–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –¥–≤—É—Ö –∫–æ–ª–ª–µ–∫—Ü–∏–π –ø–æ —Å–æ–≤–ø–∞–¥–∞—é—â–∏–º –∫–ª—é—á–∞–º, –∞–Ω–∞–ª–æ–≥ SQL `INNER JOIN`.
```csharp
var users = new[]
{
    new { Id = 1, Name = "–ê–Ω—è" },
    new { Id = 2, Name = "–ë–æ—Ä–∏—Å" }
};

var orders = new[]
{
    new { UserId = 1, Product = "–ù–æ—É—Ç–±—É–∫" },
    new { UserId = 2, Product = "–ú—ã—à—å" }
};

var joined = users.Join(
    orders,
    user => user.Id,        // –∫–ª—é—á –≤ –ø–µ—Ä–≤–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏
    order => order.UserId,  // –∫–ª—é—á –≤–æ –≤—Ç–æ—Ä–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏
    (user, order) => new { user.Name, order.Product } // —Ä–µ–∑—É–ª—å—Ç–∞—Ç
);

foreach (var item in joined)
    Console.WriteLine($"{item.Name} –∑–∞–∫–∞–∑–∞–ª {item.Product}");
/*
–ê–Ω—è –∑–∞–∫–∞–∑–∞–ª –ù–æ—É—Ç–±—É–∫
–ë–æ—Ä–∏—Å –∑–∞–∫–∞–∑–∞–ª –ú—ã—à—å
*/
```
üëâ –ü–æ–¥—Ö–æ–¥–∏—Ç, –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ —Å–≤—è–∑–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–æ –∫–ª—é—á—É.

---
#### ‚ûï **3. Aggregate (—Å–≤—ë—Ä—Ç–∫–∞)**
–ü–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –∫ –∫–æ–ª–ª–µ–∫—Ü–∏–∏, —Å—Ö–æ–∂–µ —Å `Reduce` –∏–∑ –¥—Ä—É–≥–∏—Ö —è–∑—ã–∫–æ–≤.
```csharp
var numbers = new[] { 1, 2, 3, 4 };

int sum = numbers.Aggregate((acc, n) => acc + n);
Console.WriteLine(sum); // 10
```
–ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ:
```csharp
int product = numbers.Aggregate(1, (acc, n) => acc * n);
Console.WriteLine(product); // 24
```
üëâ –£–¥–æ–±–Ω–æ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è —Å—É–º–º—ã, –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è, –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü–∏–∏ —Å—Ç—Ä–æ–∫ –∏ –¥—Ä—É–≥–∏—Ö –∞–≥—Ä–µ–≥–∞—Ç–æ–≤.

---
|–û–ø–µ—Ä–∞—Ü–∏—è|–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ|–ê–Ω–∞–ª–æ–≥ –≤ SQL|–†–µ–∑—É–ª—å—Ç–∞—Ç|
|---|---|---|---|
|`GroupBy`|–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –∫–ª—é—á—É|`GROUP BY`|–ö–æ–ª–ª–µ–∫—Ü–∏—è –≥—Ä—É–ø–ø|
|`Join`|–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–π –ø–æ –∫–ª—é—á—É|`INNER JOIN`|–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—Ä|
|`Aggregate`|–°–≤—ë—Ä—Ç–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ|`SUM`, `COUNT`, `AVG` –∏ –¥—Ä.|–û–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ|

---
‚úÖ **–ì–ª–∞–≤–Ω–æ–µ –ø–æ–º–Ω–∏—Ç—å:**
- `GroupBy` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≥—Ä—É–ø–ø—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å (`Count`, `Sum` –∏ —Ç.–ø.).
- `Join` —Å–æ–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ –∫–ª—é—á–∞–º.
- `Aggregate` —Å–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç –≤—Å—ë –≤ –æ–¥–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø—Ä–æ—Ö–æ–¥—è –∫–æ–ª–ª–µ–∫—Ü–∏—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.
